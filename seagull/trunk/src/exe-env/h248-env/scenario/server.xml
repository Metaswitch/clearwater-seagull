<!--

  This program is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation; either version 2 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

 (c)Copyright 2006 Hewlett-Packard Development Company, LP.

-->

<?xml version="1.0" encoding="ISO-8859-1" ?>
<scenario>

<traffic>
   <receive channel="channel-1">
   <message>
     <!-- header -->
     <! [ CDATA[MEGACO/1 [123.123.123.4\] 
          Transaction = 1 ]]>
     <!-- body -->
     <![CDATA[Context = $ {
                Add = T1 {
                        Media {
                                Stream = 1 {
                                        LocalControl {
                                                Mode = SendReceive,
                                        },
                                        Local {
                                                v=0
                                                c=IN IP4 $
                                                m=audio $ RTP/AVP 0
                                                a=rtpmap:0 PCMU/8000/1
                                        },
                                        Remote {
                                                v=0
                                                c=IN IP4 16.16.200.10
                                                m=audio 10000 RTP/AVP 0
                                                a=rtpmap:0 PCMU/8000/1
                                        }
                                }
                        }
                }}}]]>
     </message>

     <action>
       <store name="TRANS-ID" entity="transaction-id">
         <regexp name="trans-id"
             expr="[Tt][Rr][Aa][Nn][Ss][Aa][Cc][Tt][Ii][Oo][Nn][[:space:]]*[=][[:space:]]*([0-9]+)"
             nbexpr="2"
             subexpr="1">
         </regexp>
       </store>
     </action>

   </receive>

   <send channel="channel-1">
     <action>
      <restore name="TRANS-ID" entity="transaction-id"></restore>
     </action>
     <message>
     <!-- header -->
     <![CDATA[MEGACO/1 [123.123.123.4\] 
              Reply = 1
]]>
     <!-- body -->
     <![CDATA[ Context = 101 {
                Add = {
                        Media {
                                Stream = 1 {
                                        Local {
                                                v=0
                                                c=IN IP4 16.16.200.2
                                                m=audio 20001 RTP/AVP 0
                                                a=rtpmap:0 PCMU/8000/1
                                        }
                                }
                        }
                }
        }
}]]>
     </message>

   <action>
     <!-- close the socket -->
<!--
     <close></close>
-->
   </action>

   </send>
</traffic>

</scenario>











